{{ define "main" }}
  {{ if eq .Title "Marketing" }}
    <section class="max-w-7xl mx-auto px-4 py-12">
      <h1 class="text-3xl font-semibold">{{ .Title }}</h1>
      {{ with .Content }}<div class="prose prose-slate max-w-none mt-4">{{ . }}</div>{{ end }}
      <div class="mt-8 grid grid-cols-1 gap-6">
        {{ range .Pages }}
          {{ $page := . }}
          {{ $readURL := $page.RelPermalink }}
          {{ with $page.Params.external_url }}{{ $readURL = . }}{{ end }}
          {{ $isExternal := hasPrefix $readURL "http" }}
          <article class="group relative grid gap-4 md:gap-6 bg-white rounded-2xl p-6 md:p-10 text-slate-800 shadow-lg ring-1 ring-sky-100 border-t-4 border-sky-400 transition hover:shadow-xl hover:-translate-y-0.5">
            <div class="flex items-end justify-between">
              <h2 class="text-xl font-medium uppercase tracking-wide break-words leading-snug" style="display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;">
                <a href="{{ $page.RelPermalink }}" class="hover:underline underline-offset-4">{{ $page.Title }}</a>
              </h2>
              <div class="text-4xl leading-none">
                <svg class="w-10 h-10 text-transparent [background:linear-gradient(to_right,#6366f1,#06b6d4)] [background-clip:text]"
                     viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M4 5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9l-4 4v-4H6a2 2 0 0 1-2-2V5zm2 0v9h12V5H6z" />
                </svg>
              </div>
            </div>
            {{ with $page.Summary }}
              <div class="prose prose-slate max-w-none leading-snug prose-p:my-1 prose-ul:list-none prose-ol:list-none prose-li:inline" style="display:-webkit-box;-webkit-line-clamp:4;line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;">
                {{ . }}
              </div>
            {{ end }}
            <div class="flex justify-end">
              <a href="{{ $readURL }}" class="mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-600 text-white shadow hover:bg-indigo-700 transition"
                 {{ if $isExternal }}target="_blank" rel="noopener noreferrer"{{ end }}>
                Read more
                <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414-1.414L13.586 10H4a1 1 0 110-2h9.586l-3.293-3.293a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
              </a>
            </div>
          </article>
        {{ end }}
      </div>
    </section>
  {{ else }}
    <section class="max-w-7xl mx-auto px-4 py-12 bg-slate-100">
      <h1 class="text-3xl font-semibold">{{ .Title }}</h1>
      {{ with .Content }}<div class="prose max-w-none mt-4">{{ . }}</div>{{ end }}
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8 items-stretch">
        {{ range .Pages }}
          <article class="border border-gray-200 rounded-lg p-4 h-full flex flex-col bg-white shadow-sm transition hover:shadow-md hover:-translate-y-0.5">
            <h2 class="text-lg font-medium"><a href="{{ .RelPermalink }}" class="hover:underline">{{ .Title }}</a></h2>
            {{ with .Params.image }}<img src="{{ . }}" alt="{{ $.Title }}" class="w-full h-48 object-cover rounded mt-3" />{{ end }}
            {{ with .Summary }}
              <div class="prose prose-slate max-w-none mt-3 prose-headings:font-bold prose-ol:list-decimal prose-ul:list-disc prose-li:my-1 marker:text-black">
                {{ . }}
              </div>
            {{ end }}
          </article>
        {{ end }}
      </div>
    </section>
  {{ end }}
{{ end }}
